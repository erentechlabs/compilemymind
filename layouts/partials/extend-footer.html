<!-- Defer non-critical scripts -->
<script>
  // Lazy load Firebase only when needed
  if (document.querySelector('[data-firebase]')) {
    const loadFirebase = () => {
      const scripts = [
        'https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js',
        'https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js',
        'https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js'
      ];
      scripts.forEach(src => {
        const script = document.createElement('script');
        script.src = src;
        script.defer = true;
        document.body.appendChild(script);
      });
    };
    
    if ('requestIdleCallback' in window) {
      requestIdleCallback(loadFirebase);
    } else {
      setTimeout(loadFirebase, 2000);
    }
  }
</script>
